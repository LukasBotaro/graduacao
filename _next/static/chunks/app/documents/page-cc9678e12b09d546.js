(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[479],{71758:function(e,s,a){Promise.resolve().then(a.bind(a,73434))},37164:function(e,s,a){"use strict";a.d(s,{Z:function(){return l}});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a(78030).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},22023:function(e,s,a){"use strict";a.d(s,{Z:function(){return l}});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a(78030).Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},73434:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return S}});var l=a(57437),t=a(2265),i=a(66723),n=a(89733),r=a(77209),c=a(70402),d=a(2128),o=a(54662),u=a(48185),h=a(37374),m=a(96273),x=a(22023),f=a(63550);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let j=(0,a(78030).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var p=a(37164),v=a(91518),N=a(79055),y=a(31590),g=a(49354);let w=(0,a(89564).D)("nh_documents");function S(){let[e,s]=t.useState(h.De),a=t.useMemo(()=>{try{let e=localStorage.getItem("nh_employees");return e?JSON.parse(e):h.gt}catch(e){return h.gt}},[]),[S,C]=t.useState(!1),[D,k]=t.useState(!1),[b,_]=t.useState(null),[z,Z]=t.useState(()=>(0,g.Qj)()),[M,A]=t.useState(""),[E,F]=t.useState(z[0]||"");t.useEffect(()=>{let e=()=>{let e=(0,g.Qj)();Z(e),!e.includes(E)&&e.length>0&&F(e[0])};return e(),window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[E]);let[q,I]=t.useState(""),[R,O]=t.useState(""),[T,V]=t.useState(void 0),[B,H]=t.useState(void 0);function U(){A(""),F(z[0]||""),I(""),O(""),V(void 0),H(void 0)}function Q(e){if(e<1024)return"".concat(e,"B");let s=e/1024;return s<1024?"".concat(Math.round(s),"KB"):"".concat((s/1024).toFixed(2),"MB")}return t.useEffect(()=>{let e=w.get();e?s(e):w.set(h.De)},[]),t.useEffect(()=>{w.set(e)},[e]),(0,l.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,l.jsx)(i.Z,{title:"Gest\xe3o de Documentos"}),(0,l.jsxs)("main",{className:"flex-1 overflow-y-auto p-4 sm:p-6 lg:p-8",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-2xl font-bold tracking-tight",children:"Documentos dos Funcion\xe1rios"}),(0,l.jsx)("p",{className:"text-muted-foreground",children:"Armazene e gerencie com seguran\xe7a todos os documentos relacionados aos funcion\xe1rios."})]}),(0,l.jsxs)(o.Vq,{open:S,onOpenChange:C,children:[(0,l.jsx)(o.hg,{asChild:!0,children:(0,l.jsxs)(n.z,{children:[(0,l.jsx)(m.Z,{className:"mr-2 h-4 w-4"})," Enviar Documento"]})}),(0,l.jsxs)(o.cZ,{children:[(0,l.jsx)(o.fK,{children:(0,l.jsx)(o.$N,{children:"Novo Documento"})}),(0,l.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),!M||!q)return;let a=new Date,l=new Date(a.getTime()-6e4*a.getTimezoneOffset()).toISOString(),t={id:"doc-".concat(Date.now()),employeeId:B||"emp-".concat(Math.floor(1e5*Math.random())),employeeName:M,documentType:E,fileName:q,uploadDate:l,fileSize:R||"--",fileDataUrl:T};s(e=>[t,...e]);try{(0,g.i4)({userName:"Admin",userAvatar:"AD",action:"adicionou",target:"documento ".concat(q)})}catch(e){}C(!1),U()},className:"space-y-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(c._,{children:"Funcion\xe1rio"}),(0,l.jsxs)(d.Ph,{value:B,onValueChange:e=>{H(e);let s=a.find(s=>s.id===e);A(s?"".concat(s.firstName," ").concat(s.lastName):"")},children:[(0,l.jsx)(d.i4,{children:(0,l.jsx)(d.ki,{placeholder:"Selecione um funcion\xe1rio"})}),(0,l.jsx)(d.Bw,{children:a.map(e=>(0,l.jsxs)(d.Ql,{value:e.id,children:[e.firstName," ",e.lastName]},e.id))})]})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(c._,{htmlFor:"file-upload",children:"Arquivo"}),(0,l.jsx)(r.I,{id:"file-upload",type:"file",onChange:function(e){var s;let a=null===(s=e.target.files)||void 0===s?void 0:s[0];if(!a)return;I(a.name),O(Q(a.size));let l=new FileReader;l.onload=()=>{V("string"==typeof l.result?l.result:void 0)},l.readAsDataURL(a)},accept:"*/*"})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(c._,{children:"Tipo de Documento"}),(0,l.jsxs)(d.Ph,{value:E,onValueChange:e=>F(e),children:[(0,l.jsx)(d.i4,{children:(0,l.jsx)(d.ki,{placeholder:"Selecione"})}),(0,l.jsx)(d.Bw,{children:z.map(e=>(0,l.jsx)(d.Ql,{value:e,children:e},e))})]})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(c._,{htmlFor:"fileName",children:"Nome do Arquivo"}),(0,l.jsx)(r.I,{id:"fileName",placeholder:"ex: Contrato_Joao_Silva.pdf",value:q,onChange:e=>I(e.target.value),required:!0})]}),(0,l.jsx)(o.cN,{children:(0,l.jsx)(n.z,{type:"submit",children:"Salvar"})})]})]})]})]}),(0,l.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:e.map(e=>(0,l.jsxs)(u.Zb,{children:[(0,l.jsx)(u.Ol,{children:(0,l.jsxs)("div",{className:"flex items-start justify-between",children:[(0,l.jsx)(x.Z,{className:"h-8 w-8 text-primary"}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(N.C,{variant:"outline",children:e.documentType}),(0,l.jsxs)(y.h_,{children:[(0,l.jsx)(y.$F,{asChild:!0,children:(0,l.jsxs)(n.z,{variant:"ghost",className:"h-8 w-8 p-0",children:[(0,l.jsx)("span",{className:"sr-only",children:"Abrir menu"}),(0,l.jsx)(f.Z,{className:"h-4 w-4"})]})}),(0,l.jsxs)(y.AW,{align:"end",children:[(0,l.jsx)(y.Ju,{children:"A\xe7\xf5es"}),(0,l.jsx)(y.Xi,{onClick:()=>(function(e){if(_(e),A(e.employeeName),F(e.documentType),I(e.fileName),O(e.fileSize),V(e.fileDataUrl),e.employeeId)H(e.employeeId);else{let s=a.find(s=>"".concat(s.firstName," ").concat(s.lastName)===e.employeeName);H(null==s?void 0:s.id)}k(!0)})(e),children:"Editar"}),(0,l.jsx)(y.VD,{}),(0,l.jsx)(y.Xi,{className:"text-destructive",onClick:()=>{confirm("Excluir este documento?")&&s(s=>s.filter(s=>s.id!==e.id))},children:"Excluir"})]})]})]})]})}),(0,l.jsxs)(u.aY,{children:[(0,l.jsx)(u.ll,{className:"text-base font-medium truncate",children:e.fileName}),(0,l.jsxs)(u.SZ,{className:"flex items-center gap-2 mt-2",children:[(0,l.jsx)(j,{className:"h-3 w-3"})," ",e.employeeName]})]}),(0,l.jsxs)(u.eW,{className:"flex justify-between text-xs text-muted-foreground",children:[(0,l.jsx)("span",{children:(0,v.WU)(new Date(e.uploadDate),"d MMM, yyyy")}),e.fileDataUrl?(0,l.jsx)("a",{href:e.fileDataUrl,download:e.fileName,className:"inline-flex",children:(0,l.jsx)(n.z,{asChild:!0,variant:"ghost",size:"sm",className:"gap-2",children:(0,l.jsxs)("span",{children:[(0,l.jsx)(p.Z,{className:"h-3 w-3"}),e.fileSize]})})}):(0,l.jsxs)(n.z,{variant:"ghost",size:"sm",className:"gap-2",children:[(0,l.jsx)(p.Z,{className:"h-3 w-3"}),e.fileSize]})]})]},e.id))}),(0,l.jsx)(o.Vq,{open:D,onOpenChange:k,children:(0,l.jsxs)(o.cZ,{children:[(0,l.jsx)(o.fK,{children:(0,l.jsx)(o.$N,{children:"Editar Documento"})}),(0,l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),b&&M&&q&&(s(e=>e.map(e=>e.id===b.id?{...e,employeeName:M,employeeId:B||e.employeeId,documentType:E,fileName:q,fileSize:R||"--",fileDataUrl:T}:e)),k(!1),_(null),U())},className:"space-y-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(c._,{children:"Funcion\xe1rio"}),(0,l.jsxs)(d.Ph,{value:B,onValueChange:e=>{H(e);let s=a.find(s=>s.id===e);A(s?"".concat(s.firstName," ").concat(s.lastName):"")},children:[(0,l.jsx)(d.i4,{children:(0,l.jsx)(d.ki,{placeholder:"Selecione um funcion\xe1rio"})}),(0,l.jsx)(d.Bw,{children:a.map(e=>(0,l.jsxs)(d.Ql,{value:e.id,children:[e.firstName," ",e.lastName]},e.id))})]})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(c._,{htmlFor:"file-upload-edit",children:"Arquivo"}),(0,l.jsx)(r.I,{id:"file-upload-edit",type:"file",onChange:function(e){var s;let a=null===(s=e.target.files)||void 0===s?void 0:s[0];if(!a)return;I(a.name),O(Q(a.size));let l=new FileReader;l.onload=()=>{V("string"==typeof l.result?l.result:void 0)},l.readAsDataURL(a)},accept:"*/*"})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(c._,{children:"Tipo de Documento"}),(0,l.jsxs)(d.Ph,{value:E,onValueChange:e=>F(e),children:[(0,l.jsx)(d.i4,{children:(0,l.jsx)(d.ki,{placeholder:"Selecione"})}),(0,l.jsx)(d.Bw,{children:z.map(e=>(0,l.jsx)(d.Ql,{value:e,children:e},e))})]})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(c._,{htmlFor:"fileName-edit",children:"Nome do Arquivo"}),(0,l.jsx)(r.I,{id:"fileName-edit",placeholder:"ex: Contrato_Joao_Silva.pdf",value:q,onChange:e=>I(e.target.value),required:!0})]}),(0,l.jsx)(o.cN,{children:(0,l.jsx)(n.z,{type:"submit",children:"Salvar"})})]})]})})]})]})}},48185:function(e,s,a){"use strict";a.d(s,{Ol:function(){return r},SZ:function(){return d},Zb:function(){return n},aY:function(){return o},eW:function(){return u},ll:function(){return c}});var l=a(57437),t=a(2265),i=a(49354);let n=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,l.jsx)("div",{ref:s,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...t})});n.displayName="Card";let r=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,l.jsx)("div",{ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",a),...t})});r.displayName="CardHeader";let c=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,l.jsx)("div",{ref:s,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",a),...t})});c.displayName="CardTitle";let d=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,l.jsx)("div",{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",a),...t})});d.displayName="CardDescription";let o=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,l.jsx)("div",{ref:s,className:(0,i.cn)("p-6 pt-0",a),...t})});o.displayName="CardContent";let u=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,l.jsx)("div",{ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",a),...t})});u.displayName="CardFooter"}},function(e){e.O(0,[752,514,518,58,370,414,971,23,744],function(){return e(e.s=71758)}),_N_E=e.O()}]);